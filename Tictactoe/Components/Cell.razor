@using Tictactoe.Core;

<style>
    .cell{
        display: flex; 
        width: 100px; 
        height: 100px;
        margin: auto; 
        border-radius: 10px; 
        background-color:darkslateblue;
        font-weight: bold;
        font-size: 2em;
        color: white;
    }

    .cell > span{
        margin: auto;
        text-align:  center;
    }
    
    .cell.winner{
        background-color: #1c7430;
    }
    
    .cell.loser{
        background-color: #c82333;
    }
</style>

<div @onclick="CellSelected" class="cell @GetWinnerCssClass()">
    <span>
       @(Data.Value switch
        {
            CellMarker.Cross => "X",
            CellMarker.Nought => "O",
            _ => " "
        })
    </span>
</div>

@code {
  [Parameter]
  public Cell<CellMarker> Data {get; set;}
    
  [Parameter]
  public bool IsWinner { get; set; }
    
  [Parameter]
  public GameStatus Status { get; set; }

  [Parameter]
  public EventCallback<Coordinates> OnCellSelected {get; set;}

  private void CellSelected(){
      OnCellSelected.InvokeAsync(Data.Coordinates);
  }

  private string GetWinnerCssClass()
  {
      return IsWinner switch
      {
          true when Status == GameStatus.Player1Won => "winner",
          true when Status == GameStatus.Player2Won => "loser",
          _ => ""
      };
  }
}
